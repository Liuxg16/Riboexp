# Title
Implementation of the paper entitled "Rationalizing Translation Elongation by Reinforcement Learning"
Here we provide servaral functions as followings:
1. Reproduce some results in our paper (cross-validation performance)
2. Train a neural network model to predict ribosome densities across a set of transcripts
3. Obtained the predicted ribosome densities for a particular gene.
4. Train a neural network model by a custom dataset

# Requirement
Riboexp is written in python version 2.7, and requires the following python packages:
cuda     8.0
python   2.7
pytorch  0.3.1
numpy    1.14.3
scipy    1.0.1

# To test Riboexp using a model that has been already trained on a particular fold
python runRiboexp.py --data_path data/yeast --mode 1 --fold {foldnumber} --load {filename}
Example:    
python runRiboexp.py --data_path data/yeast/ --mode 1 --load trained_models/model_yeast_fold_0_nhids_512_drate_0.4_mark_mark_lam_0.0083-Jul24.22h39/best-model.pkl  --fold 0

# To train Riboexp for a particular fold 
python runRiboexp.py --data_path data/yeast --fold {foldnumber}

# To train Riboexp in the setting of cross-validation
python runRiboexp.py --data_path data/yeast

# To test Riboexp in the setting of cross-validation
python runRiboexp.py --data_path data/yeast --mode 2 --load0 {trainedmodel of fold 0} \
	       --load1 {trained model of fold1} --load2 {trainedmodel of fold2}
Example:
python runRiboexp.py --data_path data/yeast  --mode 2 --load0 trained_models/model_yeast_fold_0_nhids_512_drate_0.4_mark_mark_lam_0.0083-Jul24.22h39/best-model.pkl  --load1 trained_models/model_yeast_fold_1_nhids_512_drate_0.4_mark_mark_lam_0.0083-Jul25.00h18/best-model.pkl  --load2 trained_models/model_yeast_fold_2_nhids_512_drate_0.4_mark_mark_lam_0.0083-Jul25.01h49/best-model.pkl


# To train a Riboexp only with codons and nucleotides as input
python runRiboexp.py --data_path data/yeast --no_structure

# To derive the ribosome densities for a particular gene from a trained model 
## Note: This function only support the model that is trained without rna structure features.
python runRiboexp.py --data_path data/yeast --mode 3 --load {trainedmodel}  --fold 0 --no_structure --gene_path {genefile}
Example: python runRiboexp.py --data_path data/yeast --mode 3 --fold 0 --no_structure --gene_path ./data/gene.test.txt --load trained_models/model_yeast_useStructure_False_fold_0_nhids_512_drate_0.4_mark_mark_lam_0.0083-Jul25.11h46/best-model.pkl

# To train a Riboexp by custom dataset
## Preparing your dataset
1. Create a new folder in ./data/, e.g. human.
2. Divide your data into three fold, each of them containing three file that srores training, validation, and testing data, respectively.
3. Put the name, codons, and corresponding footprint counts of genes on a line in the file. Please refer to ./data/fold0/ for more details 
4. Place the three-fold data in the human folder, named "fold0",  "fold1", and "fold2", respectively.

## Command
python runRiboexp.py --data_path {your dataset} --no_structure 

If you have any questions, please feel free to contact me :)
Email: liuxg16@mails.tsinghua.edu.cn

